
#############

[xorg]

 xinit
 \_X
 \_monitor

 dwm-host
 \_st

 Xephyr
 dwm-guest
 \_st

 startx {user,nobody,proxy,jail}
  x.{user,nobody,proxy,jail}
  p.{ssh,smtp,http,irc,xmr}

#############

* Xorg/Xephyr
 -listen tcp   - 0.0.0.0 bind only      (nft.logged allows rce)
 -listen unix  - /tmp/.X11-unix/X[0-9]  (race condition on start)
 -listen local - @/tmp/.X11-unix/X[0-9] (cant lock without xauth)
 -auth /path/to/file
^ xorg-server authentication,
  cant control the address tcp binds to
  cant control permissions on .X11-unix directory and sockets
  forces cookie and global access by default

* xauth extract - $DISPLAY | dbclient domain.tld xauth merge -

#############

 start Xorg as desktop:desktop
 hang sleep infinite inside /etc/xinitrc
  /dev/tty7 - desktop access to console
 /dev/input - desktop access to input
   /dev/dri - desktop access to video
   /dev/snd - user access to audio

 /tmp/.X0-auth - set permissions to desktop:user
 start dwm-host on the empty hung xorg-server as user
 start Xephyr/dwm-guest nested multiple times inside dwm-host

#############

#############

 [xorg-server]
 -------------

 https://gitlab.freedesktop.org/xorg/

 https://www.x.org/
 https://www.x.org/releases/individual/

 https://xcb.freedesktop.org
 https://xcb.freedesktop.org/dist/

 -------------

  xorg-server + xorg-proto / xcb-proto

  libmd libbsd zlib

  libpciacess

  libdrm
  libXdmcp
  libXau
  libxcvt

  libxcb
  xcb-util
  xcb-util-image
  xcb-util-keysyms
  xcb-util-renderutil
  xcb-util-wm

  libXfont2 libfontenv 
 
 * libxcvt wont static - last xorg-server library !!!!!!

 -------------
 -Dsha1=libmd < - uses libmd regardless ?
 -Dxdmcp=true < - uses libXdmcp regardless ?
 -Dlibdrm=true < - uses libdrm regardless ?
 -------------

 --enable-listen-{tcp,unix,local}

 --enable-unix-transport
 --enable-tcp-transport
 --enable-local-transport < - breaks because stropts.h ?

 -------------
 -Dpciaccess=true (required for udev)
 -Dudev=true
 -Dudev_kms=true
 -------------
 -Dxinerama=true (only way to have multiple monitors)
 -------------
 -Dxephyr=true (only way to privdrop)
 -Dmitshm=true (Xephyr complains it cant shm ximage?)
 -------------
#############

 [libXfont2]

 --disable-builtins < - fails undefinined reference to
  
#############

 * future PYTHON= problems ?

 xorg-proto / xcb-proto / libxcb

 ^ all require python directory paths ?
   commented out xcb-proto paths ?
   defaulted to current python version

#############

#############
-------------
 [repos/xorg]
-------------
  [libmd]
   archive.hadrons.org/software/libmd/${P}.tar.xz
  ^ no alternative

  [libbsd] *
   libbsd.freedesktop.org/releases/${P}.tar.xz
   gitlab.freedesktop.org/libbsd/libbsd
  ^ both have current version
-------------
  [libudev-zero]
   github.com/illiliti/libudev-zero
   codeberg.org/illiliti/libudev-zero
  ^ hasnt moved yet
-------------
  [sys-libs/zlib]
   zlib.net/${P}.tar.gz
-------------
  [x11-base/xcb-proto]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/proto/${P}.tar.xz
   gitlab.freedesktop.org/xorg/proto/xcbproto

  [x11-base/xorg-proto]
   www.x.org/releases/individual/proto/xorgproto-2023.2.tar.xz
   gitlab.freedesktop.org/xorg/proto/xcbproto

  [x11-base/xorg-server]
   www.x.org/releases/individual/xserver/${P}.tar.xz
   gitlab.freedesktop.org/xorg/xserver
-------------
  [x11-libs/libXau]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libXau/

  [x11-libs/libXdmcp]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libXdmcp

  [x11-libs/libXfont2]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxfont

  [x11-libs/libdrm]
   dri.freedesktop.org/libdrm/${P}.tar.xz
   gitlab.freedesktop.org/mesa/drm

  [x11-libs/libfontenc]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libfontenc

  [x11-libs/libpciaccess]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libpciaccess

  [x11-libs/libxcb]
   www.xcb.freedesktop.org/dist/${P}.tar.xz
   x.org/releases/individual/xcb/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb

  [x11-libs/libxcvt]
   www.xorg/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcvt

  [x11-libs/pixman]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcvt

  [x11-libs/pixman]
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/pixman/pixman

  [x11-libs/xcb-util]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb-util

  [x11-libs/xcb-util-image]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb-util-image

  [x11-libs/xcb-util-keysyms]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb-util-keysyms

  [x11-libs/xcb-util-renderutil]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb-util-renderutil

  [x11-libs/xcb-util-wm]
   xcb.freedesktop.org/dist/${P}.tar.xz
   www.x.org/releases/individual/lib/${P}.tar.xz
   gitlab.freedesktop.org/xorg/lib/libxcb-util-wm
-------------
 gitlab > x.org > unique.org ?
-------------
#############

